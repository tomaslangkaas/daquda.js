var daquda=function(a){function b(a,b){this.data=b=b||[];this.fields=a;this.listeners=[];for(var c in a)b[c]||(b[c]=[])}function d(a,d){return new b(a,d)}d.prototype=b.prototype=a;return d}({create:function(a){return this.crud(a)},read:function(a){return this.crud([].concat(a),1)},update:function(a){return this.crud(a,2)},del:function(a){return this.crud([].concat(a),3)},crud:function(a,b){a=a||[];var d=this.data,e,f=-1,c;b&&a[0]&&(f=this.findKey(a[0]));b||(f=d[0].length,a[0]=this.newKey());if(-1<f){c=0;e=d.length;if(3==b)for(;c<e;c++)a[c]=d[c].splice(f,1)[0];else if(1==b)for(;c<e;c++)a[c]=d[c][f];else for(;c<e;c++)d[c][f]=a[c];if(b^1)for(e in b=b^3?b^2?"create":"update":"delete",c=this.listeners)c[e]&&c[e](b,f,a);return a}},observe:function(a){var b=this.listeners;if(a in b)b[a]=null;else{var d=b.length;b[d]=a;return d}},findKey:function(a){var b=this.data[0],d=b.length,e;for(e=0;e<d;e++)if(a==b[e])return e;return-1},newKey:function(){var a=this.data[0];return(a[a.length-1]||0)+1}});
